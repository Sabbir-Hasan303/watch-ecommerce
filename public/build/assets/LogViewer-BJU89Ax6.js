import{r as e,j as r,e as n,p as o,P as s,k as i,l as t,m as l,n as a,o as c,B as d}from"./mui-BKRBi9c6.js";import{H as x,L as h}from"./vendor-CXfu1X1j.js";import{A as p}from"./AuthenticatedLayout-B0v8q34p.js";import{u as m}from"./app-BLkjJg0m.js";import"./Navbar-Cp-VK2OZ.js";import"./Sidebar-HDh619-e.js";import"./utils-Dp6QJa9S.js";import"./user-check-BkBYIEHF.js";import"./createLucideIcon-DTafSqzE.js";import"./package-BZ0coysK.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";import"./user-D2E5EHqK.js";import"./index-DnSngz2F.js";function j({title:j,logs:g,files:f=[],folders:u=[],currentFile:v,currentFolder:y,standardFormat:b=!0,debug:w=null}){const[k,C]=e.useState({}),{mode:D,theme:L}=m(),I=e=>window.confirm(e),R=e=>({emergency:"error",alert:"error",critical:"error",error:"error",warning:"warning",notice:"info",info:"info",debug:"text.secondary"}[e?.toLowerCase()]||"inherit");return r.jsxs(p,{children:[r.jsx(x,{title:j}),r.jsx(n,{sx:{minHeight:"100vh"},children:r.jsxs(n,{sx:{mx:"auto",px:{xs:2,lg:3},py:3},children:[r.jsxs(n,{sx:{mb:3},children:[r.jsx(o,{variant:"h1",component:"h1",sx:{display:"flex",alignItems:"center",gap:1},children:"ğŸ“‹ Laravel Log Viewer"}),r.jsx(o,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"System Log Management"})]}),r.jsxs(n,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",xl:"300px 1fr"},gap:3},children:[r.jsxs(s,{sx:{p:2},className:"!bg-card !shadow-lg !rounded-lg",children:[r.jsx(o,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Log Files"}),r.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1,maxHeight:"400px",overflowY:"auto"},children:[u.map((e,s)=>r.jsx(n,{sx:{p:1.5,bgcolor:"action.hover",borderRadius:1},children:r.jsxs(o,{variant:"body2",children:["ğŸ“ ",e]})},s)),f.map((e,s)=>r.jsx(h,{href:`/admin/logs?l=${encodeURIComponent(e)}`,style:{textDecoration:"none"},children:r.jsx(n,{sx:{p:1.5,borderRadius:1,transition:"all 0.2s",bgcolor:v===e?"primary.main":"transparent",color:v===e?"primary.contrastText":"text.primary","&:hover":{bgcolor:v===e?"primary.dark":"action.hover"}},children:r.jsxs(o,{variant:"body2",children:["ğŸ“„ ",e]})})},s))]})]}),r.jsx(n,{children:null===g?r.jsx(s,{sx:{p:3,textAlign:"center"},className:"!bg-card !shadow-lg !rounded-lg",children:r.jsx(o,{variant:"body1",children:"Please download it to view."})}):r.jsxs(s,{sx:{overflow:"hidden"},className:"!bg-card !shadow-lg !rounded-lg",children:[r.jsx(n,{sx:{overflowX:"auto"},children:r.jsxs(i,{size:"small",children:[r.jsx(t,{children:r.jsxs(l,{sx:{"& th":{fontWeight:600}},children:[b&&r.jsxs(r.Fragment,{children:[r.jsx(a,{children:"Level"}),r.jsx(a,{children:"Date"})]}),!b&&r.jsx(a,{children:"Line"}),r.jsx(a,{children:"Content"})]})}),r.jsx(c,{children:g&&g.map((e,i)=>{return r.jsxs(l,{sx:{"&:hover":{bgcolor:"action.hover"},transition:"background-color 0.2s"},children:[b&&r.jsxs(r.Fragment,{children:[r.jsx(a,{children:r.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(o,{variant:"body2",sx:{color:`${R(e.level)}.main`},children:(t=e.level,{emergency:"ğŸš¨",alert:"ğŸ””",critical:"âŒ",error:"â—",warning:"âš ï¸",notice:"â„¹ï¸",info:"â„¹ï¸",debug:"ğŸ›"}[t?.toLowerCase()]||"â„¹ï¸")}),r.jsx(o,{variant:"body2",sx:{color:`${R(e.level)}.main`},children:e.level})]})}),r.jsx(a,{children:r.jsx(o,{variant:"caption",sx:{whiteSpace:"nowrap"},children:e.date})})]}),!b&&r.jsx(a,{children:r.jsx(o,{variant:"caption",children:e.date})}),r.jsx(a,{children:r.jsxs(n,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[r.jsxs(n,{sx:{flex:1},children:[r.jsx(o,{variant:"body2",sx:{wordBreak:"break-word"},children:e.text}),e.in_file&&r.jsx(o,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:e.in_file}),k[i]&&r.jsxs(s,{sx:{mt:1.5,p:1.5,border:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:[e.context&&r.jsxs(n,{sx:{mb:1},children:[r.jsx(o,{variant:"caption",sx:{fontWeight:600},children:"Context:"}),r.jsx(o,{variant:"caption",sx:{ml:.5,display:"block"},children:e.context})]}),e.stack&&r.jsxs(n,{children:[r.jsx(o,{variant:"caption",sx:{fontWeight:600},children:"Stack Trace:"}),r.jsx(o,{component:"pre",variant:"caption",sx:{display:"block",mt:.5,fontFamily:"monospace",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"text.secondary"},children:e.stack.trim()})]})]})]}),(e.stack||e.context)&&r.jsx(d,{onClick:()=>(e=>{C(r=>({...r,[e]:!r[e]}))})(i),size:"small",variant:"outlined",sx:{mt:.5,minWidth:"auto",p:"4px 8px"},children:"ğŸ”"})]})})]},i);var t})})]})}),v&&r.jsxs(n,{sx:{borderTop:"1px solid",borderColor:"divider",p:2,display:"flex",flexWrap:"wrap",gap:2},children:[r.jsx(h,{href:`/admin/logs?dl=${encodeURIComponent(v)}${y?"&f="+encodeURIComponent(y):""}`,style:{textDecoration:"none"},children:r.jsx(d,{variant:"text",size:"small",sx:{color:"info.main"},children:"â¬‡ï¸ Download file"})}),r.jsx(h,{href:`/admin/logs?clean=${encodeURIComponent(v)}${y?"&f="+encodeURIComponent(y):""}`,onClick:e=>{I("Are you sure you want to clean this log file?")||e.preventDefault()},style:{textDecoration:"none"},children:r.jsx(d,{variant:"text",size:"small",sx:{color:"warning.main"},children:"ğŸ”„ Clean file"})}),r.jsx(h,{href:`/admin/logs?del=${encodeURIComponent(v)}${y?"&f="+encodeURIComponent(y):""}`,onClick:e=>{I("Are you sure you want to delete this log file?")||e.preventDefault()},style:{textDecoration:"none"},children:r.jsx(d,{variant:"text",size:"small",sx:{color:"error.main"},children:"ğŸ—‘ï¸ Delete file"})}),f.length>1&&r.jsx(h,{href:"/admin/logs?delall=true"+(y?"&f="+encodeURIComponent(y):""),onClick:e=>{I("Are you sure you want to delete ALL log files?")||e.preventDefault()},style:{textDecoration:"none"},children:r.jsx(d,{variant:"text",size:"small",sx:{color:"error.main"},children:"ğŸ—‘ï¸ Delete all files"})})]})]})})]})]})})]})}export{j as default};

import{r as e,j as s,F as a,I as l,S as r,H as t,P as o,i as c,k as d,l as i,m as n,n as m,o as x,p as h,q as u,y as b,s as p,M as j,z as g,J as f}from"./mui-BKRBi9c6.js";import{H as N,r as v}from"./vendor-CXfu1X1j.js";import{A as w}from"./AuthenticatedLayout-B0v8q34p.js";import{C as y}from"./CustomSelectField-B-S7bTVB.js";import{C as k}from"./CustomTextField-BTuAnPE3.js";import{C}from"./CancelOrderDialog-DRfxX8vs.js";import{T as S}from"./Taka-HCVrmtu1.js";import{C as P}from"./circle-x-CZyvEPCZ.js";import{P as _}from"./package-BZ0coysK.js";import{T as D}from"./truck-COhtLTKw.js";import{C as L}from"./circle-check-big-C6kL7bLL.js";import{C as O}from"./clock-jxPEyoyk.js";import{E as z}from"./ellipsis-vertical-DGSHNWiZ.js";import{E as A}from"./eye-C6XdZ-Tw.js";import{D as I}from"./download-B5zqFGKj.js";import"./Navbar-Cp-VK2OZ.js";import"./app-BLkjJg0m.js";import"./Sidebar-HDh619-e.js";import"./utils-Dp6QJa9S.js";import"./user-check-BkBYIEHF.js";import"./createLucideIcon-DTafSqzE.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";import"./user-D2E5EHqK.js";import"./index-DnSngz2F.js";const F={pending:{label:"Pending",icon:O,color:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"},confirmed:{label:"Confirmed",icon:L,color:"bg-blue-500/10 text-blue-500 border-blue-500/20"},shipped:{label:"Shipped",icon:D,color:"bg-purple-500/10 text-purple-500 border-purple-500/20"},delivered:{label:"Delivered",icon:_,color:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20"},cancelled:{label:"Cancelled",icon:P,color:"bg-red-500/10 text-red-500 border-red-500/20"}};function E({orders:D=[],flash:L}){const[O,E]=e.useState(""),[T,B]=e.useState(""),[H,M]=e.useState(null),[$,W]=e.useState(null),[J,R]=e.useState(0),[q,Q]=e.useState(10),[U,V]=e.useState(!1),G=D.filter(e=>{const s=e.order_number.toLowerCase().includes(O.toLowerCase())||e.customer.name.toLowerCase().includes(O.toLowerCase())||e.customer.email.toLowerCase().includes(O.toLowerCase()),a=""===T||F[e.status]?.label.toLowerCase()===T;return s&&a}),K=J*q,X=G.slice(K,K+q),Y=()=>{M(null),W(null)},Z=(e,s)=>{switch(Y(),e){case"view":(e=>{v.visit(route("admin.orders.show",{id:e}))})(s);break;case"download":window.open(route("admin.orders.invoice",{id:s}),"_blank");break;case"cancel":W(s),V(!0)}};return s.jsxs(w,{flash:L,children:[s.jsx(N,{title:"Order Management"}),s.jsxs("div",{className:"py-4 custom-container mx-auto md:px-[40px] md:py-[18px]",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:s.jsx("h2",{className:"text-2xl leading-9 font-bold text-text-primary mb-6",children:"Order Management"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-card shadow-lg rounded-lg",children:[s.jsx("div",{className:"p-6 flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[s.jsx(a,{size:"small",sx:{minWidth:300},children:s.jsx(k,{placeholder:"Search orders...",value:O,onChange:e=>E(e.target.value),className:"pl-10",InputProps:{startAdornment:s.jsx(l,{position:"start",children:s.jsx(r,{className:"w-4 h-4 mr-2"})})}})}),s.jsx(a,{size:"small",sx:{minWidth:200},children:s.jsx(y,{placeholder:"Select status...",value:T,onChange:e=>B(e.target.value),label:"Status",InputProps:{startAdornment:s.jsx(l,{position:"start",children:s.jsx(t,{className:"w-4 h-4 mr-2"})})},options:[{value:"",label:"All Statuses"},...Object.values(F).map(e=>({value:e.label.toLowerCase(),label:e.label}))]})})]})}),s.jsxs(o,{sx:{width:"100%"},children:[s.jsx(c,{sx:{maxHeight:"500px"},className:"table-container",children:s.jsxs(d,{children:[s.jsx(i,{children:s.jsxs(n,{children:[s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:s.jsx("div",{className:"flex items-center gap-2",children:"Order"})}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:s.jsx("div",{className:"flex items-center gap-2",children:"Order From"})}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:s.jsx("div",{className:"flex items-center gap-2",children:"Area"})}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:s.jsx("div",{className:"flex items-center gap-2",children:"Date"})}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:s.jsx("div",{className:"flex items-center gap-2",children:"Status"})}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:"Items"}),s.jsx(m,{className:"table-header-cell dark:table-header-cell",children:"Total"}),s.jsx(m,{className:"table-header-cell dark:table-header-cell !text-center",children:"Actions"})]})}),s.jsx(x,{children:0===X.length?s.jsx(n,{children:s.jsx(m,{colSpan:7,className:"table-body-cell dark:table-body-cell text-center py-8",children:s.jsx(h,{variant:"body2",className:"text-muted-foreground",children:"No orders found"})})}):X.map(e=>{const a=F[e.status].icon;return s.jsxs(n,{hover:!0,children:[s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-muted flex-shrink-0 flex items-center justify-center",children:s.jsx(_,{className:"w-6 h-6 text-muted-foreground"})}),s.jsx("div",{className:"min-w-0",children:s.jsx(h,{variant:"body2",className:"font-medium text-foreground truncate",children:e.order_number})})]})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsxs("div",{children:[s.jsx(h,{variant:"body2",className:"font-medium text-foreground",children:e.shipping_address.full_name}),s.jsx(h,{variant:"caption",className:"text-muted-foreground",children:e.shipping_address.email}),s.jsx("br",{}),s.jsx(h,{variant:"caption",className:"text-muted-foreground",children:e.shipping_address.address_line})]})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsx(h,{variant:"body2",className:"text-foreground",children:"inside_dhaka"===e.shipping_address.area?"Inside Dhaka":"outside_dhaka"===e.shipping_address.area?"Outside Dhaka":"N/A"})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsx(h,{variant:"body2",className:"text-foreground",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsx(u,{label:F[e.status].label,size:"small",icon:s.jsx(a,{className:"w-3.5 h-3.5"}),sx:{bgcolor:F[e.status].color.includes("yellow")?"rgba(245, 158, 11, 0.1)":F[e.status].color.includes("blue")?"rgba(59, 130, 246, 0.1)":F[e.status].color.includes("purple")?"rgba(147, 51, 234, 0.1)":F[e.status].color.includes("emerald")?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:F[e.status].color.includes("yellow")?"#F59E0B":F[e.status].color.includes("blue")?"#3B82F6":F[e.status].color.includes("purple")?"#9333EA":F[e.status].color.includes("emerald")?"#10B981":"#EF4444",border:"none","&:hover":{bgcolor:F[e.status].color.includes("yellow")?"rgba(245, 158, 11, 0.2)":F[e.status].color.includes("blue")?"rgba(59, 130, 246, 0.2)":F[e.status].color.includes("purple")?"rgba(147, 51, 234, 0.2)":F[e.status].color.includes("emerald")?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}},className:"!py-1 !px-2"})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsxs(h,{variant:"body2",className:"text-foreground",children:[e.items_count," items"]})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(S,{className:"text-sm"}),Number(e.total).toFixed(2)||0]})}),s.jsx(m,{className:"table-body-cell dark:table-body-cell",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx(b,{size:"small",className:"h-8 w-8",onClick:s=>{return a=s,l=e.id,a.stopPropagation(),M(a.currentTarget),void W(l);var a,l},children:s.jsx(z,{className:"w-4 h-4"})})})})]},e.id)})})]})}),s.jsx(p,{className:"table-pagination dark:table-pagination",rowsPerPageOptions:[5,10,25,50,100],component:"div",count:G.length,rowsPerPage:q,page:J,onPageChange:(e,s)=>R(s),onRowsPerPageChange:e=>{Q(parseInt(e.target.value,10)),R(0)},labelDisplayedRows:({from:e,to:s,count:a})=>`${e}-${s} of ${-1!==a?a:`more than ${s}`}`})]})]}),s.jsxs(j,{anchorEl:H,open:Boolean(H),onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:1,minWidth:180,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.1)"}},children:[s.jsxs(g,{onClick:()=>Z("view",$),sx:{fontSize:"0.875rem",py:1.5,px:2},children:[s.jsx(A,{className:"w-4 h-4 mr-2"}),"View Details"]}),s.jsxs(g,{onClick:()=>Z("download",$),sx:{fontSize:"0.875rem",py:1.5,px:2},children:[s.jsx(I,{className:"w-4 h-4 mr-2"}),"Download Invoice"]}),s.jsx(f,{}),s.jsxs(g,{onClick:()=>Z("cancel",$),sx:{fontSize:"0.875rem",py:1.5,px:2,color:"error.main"},children:[s.jsx(P,{className:"w-4 h-4 mr-2"}),"Cancel Order"]})]}),s.jsx(C,{open:U,onClose:()=>V(!1),orderId:$,onSuccess:()=>{v.reload()}})]})]})]})}export{E as default};

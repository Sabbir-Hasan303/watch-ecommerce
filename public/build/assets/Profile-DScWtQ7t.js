import{r as e,j as s}from"./mui-BKRBi9c6.js";import{u as r,H as a,r as t}from"./vendor-CXfu1X1j.js";import{C as l}from"./CustomerLayout-BGh4eW2n.js";import{P as o}from"./plus-avlLwFjE.js";import{M as i}from"./map-pin-CREN4_JN.js";import{S as d}from"./star-EU5Ah4-2.js";import{T as n}from"./trash-2-DJX3qbod.js";import"./Navbar-iDX5aUd4.js";import"./CartContext-DjfH1BQF.js";import"./createLucideIcon-DTafSqzE.js";import"./index-DnSngz2F.js";import"./user-D2E5EHqK.js";import"./shopping-cart-CL8or4bS.js";import"./Footer--wJmCuTR.js";import"./twitter-BTKGyMIz.js";import"./CartSidebar-BtMGTNJ9.js";import"./Taka-HCVrmtu1.js";import"./x-BWEyoRfZ.js";import"./minus-BJgHQvPy.js";import"./Sidebar-B8gpqyYu.js";import"./house-BtSOJl6x.js";import"./package-BZ0coysK.js";import"./log-out-DGK9mjts.js";function c({user:c,addresses:m=[],areaOptions:x=[]}){const[u,p]=e.useState(!1),[b,h]=e.useState(!1),[g,f]=e.useState(null),j=e.useRef(null),N=r({name:c?.name||"",email:c?.email||"",phone:c?.phone||""}),v=r({full_name:"",phone:"",address_line:"",area:x[0]?.value||"inside_dhaka",is_default:!1}),y=r({profile_image:null});e.useEffect(()=>()=>{g&&URL.revokeObjectURL(g)},[g]);return s.jsxs(l,{children:[s.jsx(a,{title:"Profile"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Personal Details"}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[s.jsx("button",{type:"button",onClick:()=>j.current?.click(),className:"w-24 h-24 rounded-full overflow-hidden border border-gray-200 bg-gray-100 flex items-center justify-center hover:ring-2 hover:ring-gray-300 transition",children:g||c?.profile_image?s.jsx("img",{src:g||`/storage/${c.profile_image}`,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-sm",children:"Upload"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-bold mb-2",children:"Profile Picture"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a square image (JPG, PNG, or WebP) no larger than 2 MB."}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),y.data.profile_image&&y.post(route("customer.profile.image"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{y.reset(),f(e=>(e&&URL.revokeObjectURL(e),null)),j.current&&(j.current.value="")}})},className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[s.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:e=>{const s=e.target.files?.[0];s&&(y.setData("profile_image",s),f(e=>(e&&URL.revokeObjectURL(e),URL.createObjectURL(s))))}}),s.jsx("button",{type:"submit",disabled:!y.data.profile_image||y.processing,className:"px-6 py-2 bg-black text-white rounded font-semibold hover:bg-gray-800 transition-colors disabled:opacity-60",children:"Upload"})]}),y.errors.profile_image&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:y.errors.profile_image})]})]})}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Profile Information"}),!u&&s.jsx("button",{onClick:()=>p(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),u?s.jsxs("form",{onSubmit:e=>{e.preventDefault(),N.put(route("customer.profile.update"),{preserveScroll:!0,onSuccess:()=>p(!1)})},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:N.data.name,onChange:e=>N.setData("name",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black",required:!0}),N.errors.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.errors.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:N.data.phone,onChange:e=>N.setData("phone",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black"}),N.errors.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.errors.phone})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),s.jsx("input",{type:"email",value:N.data.email,onChange:e=>N.setData("email",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black",required:!0}),N.errors.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.errors.email})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"submit",disabled:N.processing,className:"px-6 py-2 bg-black text-white rounded font-semibold hover:bg-gray-800 transition-colors disabled:opacity-60",children:"Save Changes"}),s.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-2 border border-gray-300 rounded font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Full Name"}),s.jsx("p",{className:"font-medium",children:c?.name||"Not set"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),s.jsx("p",{className:"font-medium",children:c?.phone||"Not set"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),s.jsx("p",{className:"font-medium",children:c?.email||"Not set"})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Saved Addresses"}),s.jsxs("button",{onClick:()=>h(e=>!e),className:"flex items-center gap-2 px-4 py-2 bg-black text-white rounded font-semibold hover:bg-gray-800 transition-colors text-sm",children:[s.jsx(o,{className:"w-4 h-4"}),b?"Hide Form":"Add Address"]})]}),b&&s.jsxs("form",{onSubmit:e=>{e.preventDefault(),v.post(route("customer.addresses.store"),{preserveScroll:!0,onSuccess:()=>{h(!1),v.reset(),v.setData("area",x[0]?.value||"inside_dhaka"),v.setData("is_default",!1)}})},className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"New Address"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Recipient Name"}),s.jsx("input",{type:"text",value:v.data.full_name,onChange:e=>v.setData("full_name",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black"}),v.errors.full_name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.errors.full_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:v.data.phone,onChange:e=>v.setData("phone",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black",required:!0}),v.errors.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.errors.phone})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address Line"}),s.jsx("input",{type:"text",value:v.data.address_line,onChange:e=>v.setData("address_line",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black",required:!0}),v.errors.address_line&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.errors.address_line})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Delivery Area"}),s.jsx("select",{value:v.data.area,onChange:e=>v.setData("area",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black",children:x.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))}),v.errors.area&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.errors.area})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{id:"address-default",type:"checkbox",checked:v.data.is_default,onChange:e=>v.setData("is_default",e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-black focus:ring-black"}),s.jsx("label",{htmlFor:"address-default",className:"text-sm font-medium text-gray-700",children:"Set as default address"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"submit",disabled:v.processing,className:"px-6 py-2 bg-black text-white rounded font-semibold hover:bg-gray-800 transition-colors disabled:opacity-60",children:"Save Address"}),s.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-6 py-2 border border-gray-300 rounded font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}),s.jsx("div",{className:"space-y-3",children:m.length>0?m.map(e=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(i,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:e.full_name||c?.name||"Recipient"}),e.is_default&&s.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-black text-white rounded-full",children:[s.jsx(d,{className:"w-3 h-3"}),"Default"]})]}),s.jsx("p",{className:"text-sm text-gray-700",children:e.phone}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.address_line}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 uppercase tracking-wide",children:e.area_label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!e.is_default&&s.jsx("button",{onClick:()=>{return s=e.id,void t.patch(route("customer.addresses.default",s),{},{preserveScroll:!0});var s},className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 transition-colors",children:"Set Default"}),s.jsx("button",{onClick:()=>{return s=e.id,void t.delete(route("customer.addresses.destroy",s),{preserveScroll:!0});var s},className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(n,{className:"w-4 h-4"})})]})]})},e.id)):s.jsx("p",{className:"text-gray-600 text-center py-8",children:"No saved addresses yet"})})]})]})]})}export{c as default};

import{r as e,j as s,B as a,e as l,K as r,p as t}from"./mui-BKRBi9c6.js";import{C as d}from"./card-DBmDQUNT.js";import{C as i}from"./CustomTextField-BTuAnPE3.js";import{C as n}from"./CustomSelectField-B-S7bTVB.js";import{A as o}from"./AsynchronousInput-DNmkCEvD.js";import{U as m}from"./user-D2E5EHqK.js";import{U as c}from"./user-plus-DbESFwxq.js";import{P as h}from"./package-BZ0coysK.js";import{X as x}from"./x-BWEyoRfZ.js";import{M as u}from"./map-pin-CREN4_JN.js";import{P as p}from"./plus-avlLwFjE.js";import"./utils-Dp6QJa9S.js";import"./app-BLkjJg0m.js";import"./vendor-CXfu1X1j.js";import"./createLucideIcon-DTafSqzE.js";function j({customers:j=[],selectedCustomer:g,setSelectedCustomer:v,showNewCustomerForm:N,setShowNewCustomerForm:b,newCustomerData:f,setNewCustomerData:C,shippingAddress:w,setShippingAddress:y,handleCustomerSelect:A,handleCreateCustomer:k,handleNewCustomerClick:S,handleCreateNewAddress:D,handleAddressSelect:T,selectedAddress:F,isAddressFieldsDisabled:I,setIsAddressFieldsDisabled:P,handleShippingAddressChange:L}){const[O,E]=e.useState([]),[$,_]=e.useState(!1),z=e.useRef(null);e.useEffect(()=>()=>{z.current&&clearTimeout(z.current)},[]);const G=e.useCallback(e=>{z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{e&&e.length>=2?(_(!0),setTimeout(()=>{const s=j.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.email.toLowerCase().includes(e.toLowerCase())||s.phone.toLowerCase().includes(e.toLowerCase()));E(s),_(!1)},300)):(E([]),_(!1))},300)},[j]),M=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Z=e=>/^[\+]?[0-9\s\-\(\)]{10,}$/.test(e.replace(/\s/g,""));return s.jsx("div",{className:"space-y-6",children:s.jsxs(d,{className:"p-8 bg-card border-border shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-emerald-500/10 rounded-xl",children:s.jsx(m,{className:"w-5 h-5 text-emerald-500"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl leading-8 font-bold text-text-primary",children:"Select Customer"}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Choose the customer for this order"})]})]}),s.jsxs(a,{variant:"outlined",onClick:S,className:"gap-2 bg-transparent",children:[s.jsx(c,{className:"w-4 h-4"}),"Guest Customer"]})]}),!N&&!g&&s.jsx("div",{className:"mb-6",children:s.jsx(o,{options:O,loading:$,onOpen:()=>{},onClose:()=>{E([]),z.current&&(clearTimeout(z.current),z.current=null)},onInputChange:(e,s,a)=>{"input"===a&&G(s)},onChange:(e,s)=>{A(s)},value:null,getOptionLabel:e=>e?`${e.name} - ${e.email}`:"",isOptionEqualToValue:(e,s)=>e?.id===s?.id,label:"Search Customers",placeholder:"Type at least 2 characters to search...",noOptionsText:0!==O.length||$?"No customers found":"Type to search for customers...",sx:{width:"100%"},renderOption:(e,a)=>s.jsxs(l,{component:"li",...e,className:"flex items-center gap-3 p-3",children:[s.jsx(r,{className:"w-10 h-10 bg-emerald-500 text-white text-sm",children:a.name.charAt(0)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(t,{variant:"body2",className:"font-medium text-foreground truncate",children:a.name}),s.jsxs(t,{variant:"caption",className:"text-muted-foreground",children:[a.email," â€¢ ",a.phone]})]}),s.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:s.jsxs(t,{variant:"caption",className:"text-muted-foreground",children:[a.totalOrders," orders"]})})]})})}),g&&!N&&s.jsx(d,{className:"p-6 mb-6 bg-emerald-500/5 border-emerald-500/20",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[s.jsx(r,{className:"w-14 h-14 bg-emerald-500 text-white text-lg",children:g.name.charAt(0)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("p",{className:"text-lg font-semibold text-text-primary",children:g.name})}),s.jsx("p",{className:"text-sm text-text-secondary",children:g.email}),s.jsx("p",{className:"text-sm text-text-secondary",children:g.phone}),s.jsx("div",{className:"flex items-center gap-4 mt-3 text-xs text-text-secondary",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(h,{className:"w-3 h-3"}),g.totalOrders," orders"]})})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(a,{size:"sm",variant:"ghost",onClick:()=>{v(null),y({fullName:"",phone:"",email:"",address:"",area:"inside_dhaka"}),P(!1)},className:"text-muted-foreground hover:text-foreground",children:s.jsx(x,{className:"w-4 h-4"})})})]})}),N&&s.jsxs(d,{className:"p-6 mb-6 bg-muted/30 border-border",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-6",children:"Enter Guest Details"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[s.jsx("div",{children:s.jsx(i,{label:"Full Name",name:"fullName",value:f.fullName,onChange:e=>C({...f,fullName:e.target.value}),placeholder:"John Doe"})}),s.jsx("div",{children:s.jsx(i,{label:"Phone",name:"phone",value:f.phone,onChange:e=>C({...f,phone:e.target.value}),placeholder:"+1 (123) 456-7890",error:""!==f.phone.trim()&&!Z(f.phone),helperText:""===f.phone.trim()||Z(f.phone)?"":"Please enter a valid phone number"})}),s.jsx("div",{children:s.jsx(i,{label:"Email",name:"email",type:"email",value:f.email,onChange:e=>C({...f,email:e.target.value}),placeholder:"john.doe@example.com",error:""!==f.email.trim()&&!M(f.email),helperText:""===f.email.trim()||M(f.email)?"":"Please enter a valid email address"})}),s.jsx("div",{children:s.jsx(n,{label:"Area",name:"area",value:f.area,onChange:e=>C({...f,area:e.target.value}),placeholder:"Inside Dhaka",options:[{label:"Inside Dhaka",value:"inside_dhaka"},{label:"Outside Dhaka",value:"outside_dhaka"}]})}),s.jsx("div",{className:"sm:col-span-2",children:s.jsx(i,{label:"Full Address",name:"address",value:f.address,onChange:e=>C({...f,address:e.target.value}),placeholder:"123 Main St, City, State, ZIP"})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(a,{onClick:k,disabled:!(""!==f.fullName.trim()&&""!==f.phone.trim()&&""!==f.email.trim()&&""!==f.address.trim()&&M(f.email)&&Z(f.phone)),className:"bg-emerald-500 hover:bg-emerald-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Guest"}),s.jsx(a,{variant:"outline",onClick:()=>b(!1),children:"Cancel"})]})]}),!N&&g&&s.jsxs(d,{className:"p-8 bg-card border-border",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-8 gap-5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-blue-500/10 rounded-xl",children:s.jsx(u,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl leading-8 font-bold text-text-primary",children:"Shipping Address"}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Enter delivery address"})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center w-full md:w-auto gap-2",children:[g&&g.addresses&&g.addresses.length>1&&s.jsx(n,{label:"Saved Address",options:g.addresses.map((e,s)=>{let a;return a=e.isDefault?"Default Address":1===s?"Secondary Address":`${(e=>{const s=["th","st","nd","rd"],a=e%100;return e+(s[(a-20)%10]||s[a]||s[0])})(s+1)} Address`,{label:a,value:String(e.id)}}),value:F?String(F):"",onChange:e=>{const s=e.target.value;T(s)},placeholder:"Choose address",className:"w-full md:w-48"}),s.jsxs(a,{onClick:D,variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[s.jsx(p,{className:"w-4 h-4"}),"New Address"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(i,{label:"Full Name",name:"fullName",value:w.fullName,onChange:e=>L("fullName",e.target.value),placeholder:"John Doe",disabled:I})}),s.jsx("div",{children:s.jsx(i,{label:"Phone",name:"phone",value:w.phone,onChange:e=>L("phone",e.target.value),placeholder:"+1 (123) 456-7890",disabled:I,error:""!==w.phone.trim()&&!Z(w.phone),helperText:""===w.phone.trim()||Z(w.phone)?"":"Please enter a valid phone number"})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(i,{label:"Email",name:"email",type:"email",value:w.email,onChange:e=>L("email",e.target.value),placeholder:"john.doe@example.com",disabled:I,error:""!==w.email.trim()&&!M(w.email),helperText:""===w.email.trim()||M(w.email)?"":"Please enter a valid email address"})}),s.jsx("div",{children:s.jsx(n,{label:"Area",name:"area",value:w.area,onChange:e=>L("area",e.target.value),placeholder:"Inside Dhaka",options:[{label:"Inside Dhaka",value:"inside_dhaka"},{label:"Outside Dhaka",value:"outside_dhaka"}],disabled:I})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsx("div",{children:s.jsx(i,{label:"Full Address",name:"address",value:w.address,onChange:e=>L("address",e.target.value),placeholder:"123 Main St, City, State, ZIP",disabled:I})})})]})]})]})})}export{j as default};

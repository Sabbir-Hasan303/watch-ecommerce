import{j as e,r as a,B as r,W as s,i as t,P as l,k as i,l as d,m as o,n as c,o as n}from"./mui-BKRBi9c6.js";import{H as m,b as u,L as p,r as g}from"./vendor-CXfu1X1j.js";import{c as x}from"./utils-Dp6QJa9S.js";import{u as h}from"./app-BLkjJg0m.js";import{A as v}from"./AuthenticatedLayout-B0v8q34p.js";import{C as j}from"./CustomTextField-BTuAnPE3.js";import{C as b}from"./CustomSelectField-B-S7bTVB.js";import{C as f,R as y}from"./RichTextEditor-BZ_ObkdN.js";import{T as N}from"./Taka-HCVrmtu1.js";import{A as C}from"./arrow-left-CuUwxuCr.js";import{P as k}from"./plus-avlLwFjE.js";import{I as _}from"./user-check-BkBYIEHF.js";import{S as w}from"./save-b8lrRLdX.js";import{X as S}from"./x-BWEyoRfZ.js";import{U as A}from"./upload--99Nij4X.js";import{S as P}from"./square-pen-CTrpYGSO.js";import{T as E}from"./trash-2-DJX3qbod.js";import"./Navbar-Cp-VK2OZ.js";import"./Sidebar-HDh619-e.js";import"./package-BZ0coysK.js";import"./createLucideIcon-DTafSqzE.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";import"./user-D2E5EHqK.js";import"./index-DnSngz2F.js";const F=[{label:"Active",value:"active"},{label:"Draft",value:"draft"}],D=[{label:"Primary Features",value:"primary"},{label:"Additional Features",value:"additional"}],I={name:"",description:"",short_description:"",categories:[],sku:"",status:"draft",features:[],technical_specs:[],model_features:[]},B={name:"",type:"",icon:""},$={key:"",value:""},z={name:"",category:""},R={title:"",sku:"",size:"",color:"",material:"",image:null,price:"",compare_at_price:"",quantity:"",status:"active"},T=()=>Math.random().toString(36).substr(2,9),U=e=>({id:T(),url:URL.createObjectURL(e),file:e}),q=e=>{const[r,s]=a.useState(e),t=a.useCallback((e,a)=>{s(r=>({...r,[e]:a}))},[]),l=a.useCallback(()=>{s(e)},[e]);return[r,s,t,l]},L=({status:a,onStatusChange:r})=>e.jsx("div",{className:"space-y-3",children:F.map(s=>e.jsx("button",{type:"button",onClick:()=>r(s.value),className:x("w-full p-4 rounded-lg border-2 transition-all duration-200 text-left",a===s.value?`border-${"active"===s.value?"emerald":"amber"}-500 bg-${"active"===s.value?"emerald":"amber"}-500/10`:"border-border hover:border-emerald-500/50"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:x("w-4 h-4 rounded-full border-2 flex items-center justify-center",a===s.value?`border-${"active"===s.value?"emerald":"amber"}-500`:"border-muted-foreground"),children:a===s.value&&e.jsx("div",{className:`w-2 h-2 rounded-full bg-${"active"===s.value?"emerald":"amber"}-500`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-primary capitalize",children:s.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"active"===s.value?"Product is live and visible":"Product is hidden"})]})]})},s.value))}),K=({dragActive:a,onDrag:s,onDrop:t,onFileSelect:l})=>e.jsx("div",{className:x("border-2 border-dashed rounded-xl p-8 transition-all duration-200",a?"border-emerald-500 bg-emerald-500/5":"border-border hover:border-emerald-500/50 hover:bg-muted/50"),onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:t,children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Drag and drop images here, or click to browse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF up to 10MB"})]}),e.jsxs(r,{type:"button",variant:"outline",onClick:()=>l(),className:"gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Choose Files"]}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>l(e.target.files)})]})}),M=({images:a,onRemoveImage:t})=>e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:a.map((a,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a.url||"/placeholder.svg",alt:`Product ${l+1}`,className:"w-full h-32 object-cover rounded-lg border border-border"}),0===l&&e.jsx(s,{className:"absolute top-2 left-2 bg-emerald-500 text-white",children:"Primary"}),e.jsx(r,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>t(a.id),children:e.jsx(S,{className:"w-4 h-4"})})]},a.id))}),V=({feature:a,onRemove:s})=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/20 rounded-lg border border-border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.type}),a.icon&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Icon: ",a.icon]})]}),e.jsx(r,{size:"small",variant:"destructive",onClick:()=>s(a.id),className:"h-8 w-8 p-0",children:e.jsx(S,{className:"w-3 h-3"})})]}),G=({spec:a,onRemove:s})=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/20 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-medium text-foreground min-w-[120px]",children:[a.key,":"]}),e.jsx("span",{className:"text-foreground",children:a.value})]}),e.jsx(r,{size:"small",variant:"destructive",onClick:()=>s(a.id),className:"h-8 w-8 p-0",children:e.jsx(S,{className:"w-3 h-3"})})]}),Q=({feature:a,onRemove:s})=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/20 rounded-lg border border-border",children:[e.jsx("span",{className:"text-foreground",children:a.name}),e.jsx(r,{size:"small",variant:"destructive",onClick:()=>s(a.id),className:"h-8 w-8 p-0",children:e.jsx(S,{className:"w-3 h-3"})})]}),J=({image:a,onRemove:s})=>e.jsxs("div",{className:"relative w-20 h-20",children:[e.jsx("img",{src:a.url,alt:"Variant preview",className:"w-full h-full object-cover rounded border"}),e.jsx(r,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6",onClick:s,children:e.jsx(S,{className:"w-3 h-3"})})]}),O=({variants:a,onEdit:m,onRemove:u})=>e.jsx(t,{component:l,className:"bg-card border border-border",children:e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(o,{children:[e.jsx(c,{children:"Image"}),e.jsx(c,{children:"Title"}),e.jsx(c,{children:"SKU"}),e.jsx(c,{children:"Size"}),e.jsx(c,{children:"Color"}),e.jsx(c,{children:"Material"}),e.jsx(c,{children:"Price"}),e.jsx(c,{children:"Compare Price"}),e.jsx(c,{children:"Quantity"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(n,{children:a.map(a=>e.jsxs(o,{children:[e.jsx(c,{children:a.image?e.jsx("img",{src:a.image.url,alt:a.title,className:"w-12 h-12 object-cover rounded border"}):e.jsx("div",{className:"w-12 h-12 bg-muted rounded border flex items-center justify-center",children:e.jsx(_,{className:"w-4 h-4 text-muted-foreground"})})}),e.jsx(c,{children:a.title}),e.jsx(c,{children:a.sku}),e.jsx(c,{children:a.size||"-"}),e.jsx(c,{children:a.color||"-"}),e.jsx(c,{children:a.material||"-"}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{color:"text-black dark:text-white",className:"text-base"}),e.jsx("span",{className:"text-base",children:a.price})]})}),e.jsx(c,{children:a.compare_at_price?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{color:"text-black dark:text-white",className:"text-base"}),e.jsx("span",{className:"text-base",children:a.compare_at_price})]}):e.jsx("span",{className:"text-base",children:"-"})}),e.jsx(c,{children:a.quantity}),e.jsx(c,{children:e.jsx(s,{className:x("text-xs py-1 px-2 rounded-md","active"===a.status?"bg-emerald-500":"bg-amber-500"),children:a.status})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{size:"small",variant:"outline",onClick:()=>m(a),className:"h-8 w-8 p-0",children:e.jsx(P,{className:"w-3 h-3"})}),e.jsx(r,{size:"small",variant:"destructive",onClick:()=>u(a.id),className:"h-8 w-8 p-0",children:e.jsx(E,{className:"w-3 h-3"})})]})})]},a.id))})]})});function W({productId:s,product:t,categories:l}){const{isDark:i}=h(),{errors:d={}}=u().props,[o,c,n]=q(I),[m,x]=q(B),[v,S]=q($),[A,P]=q(z),[E,W]=a.useState([]),[H,X]=a.useState([]),[Y,Z]=a.useState(!1),[ee,ae]=q(R),[re,se]=a.useState(null),{images:te,setImages:le,dragActive:ie,handleImageUpload:de,removeImage:oe,handleDrag:ce,handleDrop:ne}=(()=>{const[e,r]=a.useState([]),[s,t]=a.useState(!1),l=a.useCallback(e=>{if(!e)return;const a=Array.from(e).map(U);r(e=>[...e,...a])},[]),i=a.useCallback(e=>{r(a=>a.filter(a=>a.id!==e))},[]),d=a.useCallback(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?t(!0):"dragleave"===e.type&&t(!1)},[]),o=a.useCallback(e=>{e.preventDefault(),e.stopPropagation(),t(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&l(e.dataTransfer.files)},[l]);return{images:e,setImages:r,dragActive:s,handleImageUpload:l,removeImage:i,handleDrag:d,handleDrop:o}})(),[me,ue]=a.useState(!1);a.useEffect(()=>{t&&(c({name:t.name||"",description:t.description||"",short_description:t.short_description||"",categories:Array.isArray(t.categories)?t.categories.length>0&&"object"==typeof t.categories[0]?t.categories.map(e=>e.id):t.categories:t.category?[t.category]:[],sku:t.sku||"",status:t.status||"draft",features:t.features||[],technical_specs:t.technical_specs||[],model_features:t.model_features||[]}),t.images&&le(t.images.map(e=>({id:e.id||T(),url:e.url||e.image_path,file:null}))),t.variants&&W(t.variants.map(e=>({id:e.id||T(),title:e.title||e.variant_name||"",sku:e.sku||"",size:e.size||"",color:e.color||"",material:e.material||"",price:e.price||"",compare_at_price:e.compare_at_price||"",quantity:e.quantity||e.stock_quantity||"",status:e.status||"active",image:e.image?{id:e.image.id||T(),url:e.image.url||e.image.image_path,file:null}:null}))))},[t]);const pe=a.useCallback(()=>{if(!m.name||!m.type)return void alert("Please fill in feature name and type");const e={id:T(),name:m.name,type:m.type,icon:m.icon};c(a=>({...a,features:[...a.features,e]})),x(B)},[m,c,x]),ge=a.useCallback(e=>{c(a=>({...a,features:a.features.filter(a=>a.id!==e)}))},[c]),xe=a.useCallback(()=>{if(!v.key||!v.value)return void alert("Please fill in both key and value");const e={id:T(),key:v.key,value:v.value};c(a=>({...a,technical_specs:[...a.technical_specs,e]})),S($)},[v,c,S]),he=a.useCallback(e=>{c(a=>({...a,technical_specs:a.technical_specs.filter(a=>a.id!==e)}))},[c]),ve=a.useCallback(()=>{if(!A.name)return void alert("Please fill in feature name");const e={id:T(),name:A.name,category:A.category};c(a=>({...a,model_features:[...a.model_features,e]})),P(e=>({...e,name:""}))},[A,c,P]),je=a.useCallback(e=>{c(a=>({...a,model_features:a.model_features.filter(a=>a.id!==e)}))},[c]),be=a.useCallback(e=>{e&&ae(a=>({...a,image:U(e)}))},[ae]),fe=a.useCallback(()=>{if(ee.title&&ee.sku&&ee.price&&ee.quantity){if(re)W(e=>e.map(e=>e.id===re?{...ee,id:re}:e)),se(null);else{const e={id:T(),...ee};W(a=>[...a,e])}ae(R),Z(!1)}else alert("Please fill in required fields: Title, SKU, Price, and Quantity")},[ee,ae,re]),ye=a.useCallback(e=>{E.find(a=>a.id===e)&&"number"==typeof e&&X(a=>[...a,e]),W(a=>a.filter(a=>a.id!==e))},[E]),Ne=a.useCallback(e=>{ae(e),se(e.id),Z(!0)},[ae]),Ce=a.useCallback(e=>{e?de(e):document.getElementById("file-upload")?.click()},[de]),ke=a.useCallback(()=>{document.getElementById("variant-image-upload")?.click()},[]),_e=a.useCallback(()=>{Z(!1),ae(R),se(null)},[ae]),we=a.useCallback(()=>{ae(e=>({...e,image:null}))},[ae]),Se=o.model_features.filter(e=>"primary"===e.category),Ae=o.model_features.filter(e=>"additional"===e.category);return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl leading-9 font-bold text-text-primary mb-6",children:"Edit Product"}),e.jsx("div",{children:e.jsx(p,{href:"/admin/products",children:e.jsxs(r,{variant:"ghost",size:"sm",className:"gap-2 text-gray-400 hover:text-white",children:[e.jsx(C,{className:"w-4 h-4"}),"Back to Products"]})})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Basic Product Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{id:"name",label:"Product Name",placeholder:"Enter product name",value:o.name,onChange:e=>n("name",e.target.value)}),e.jsx(j,{id:"sku",label:"SKU",placeholder:"Enter SKU",value:o.sku,onChange:e=>n("sku",e.target.value)}),Array.isArray(l)&&l.length>0?e.jsx(f,{id:"categories",label:"Categories",placeholder:"Select categories",options:l.map(e=>({label:e.name,value:e.id})),value:o.categories,onChange:e=>n("categories",e),error:!!d.categories,helperText:d.categories}):e.jsx(j,{id:"categories_fallback",label:"Categories",placeholder:"Enter categories (comma separated)",value:Array.isArray(o.categories)?o.categories.join(","):"",onChange:e=>n("categories",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),error:!!d.categories,helperText:d.categories}),e.jsx(j,{id:"short_description",label:"Short Description",placeholder:"Enter short description",value:o.short_description,onChange:e=>n("short_description",e.target.value)})]}),e.jsx(y,{id:"description",label:"Description",placeholder:"Enter product description",value:o.description,onChange:e=>n("description",e.target.value),error:!1,helperText:""})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Product Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{id:"feature-name",label:"Feature Name *",placeholder:"e.g., Digital Display",value:m.name,onChange:e=>x(a=>({...a,name:e.target.value}))}),e.jsx(j,{id:"feature-type",label:"Type *",placeholder:"e.g., Display Type",value:m.type,onChange:e=>x(a=>({...a,type:e.target.value}))}),e.jsx(j,{id:"feature-icon",label:"Icon *",placeholder:"e.g., Clock, Battery, Water",value:m.icon,onChange:e=>x(a=>({...a,icon:e.target.value}))})]}),e.jsxs(r,{variant:"outlined",onClick:pe,className:"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white",sx:{color:i?"#9CA3AF":"#6B7280",borderColor:i?"#374151":"#6B7280","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:[e.jsx(k,{className:"w-4 h-4"}),"Add Feature"]}),o.features.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-foreground",children:"Added Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:o.features.map(a=>e.jsx(V,{feature:a,onRemove:ge},a.id))})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Technical Specifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{id:"spec-key",label:"Specification Key *",value:v.key,onChange:e=>S(a=>({...a,key:e.target.value}))}),e.jsx(j,{id:"spec-value",label:"Specification Value *",value:v.value,onChange:e=>S(a=>({...a,value:e.target.value}))})]}),e.jsxs(r,{variant:"outlined",onClick:xe,className:"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white",sx:{color:i?"#9CA3AF":"#6B7280",borderColor:i?"#374151":"#6B7280","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:[e.jsx(k,{className:"w-4 h-4"}),"Add Specification"]}),o.technical_specs.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-md font-medium text-foreground",children:"Added Specifications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:o.technical_specs.map(a=>e.jsx(G,{spec:a,onRemove:he},a.id))})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Model Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{id:"model-feature-name",label:"Feature Name *",placeholder:"e.g., 19-inch wheels, LED headlights",value:A.name,onChange:e=>P(a=>({...a,name:e.target.value}))}),e.jsx(b,{id:"model-feature-category",label:"Feature Category *",placeholder:"Select category",options:D,value:A.category,onChange:e=>P(a=>({...a,category:e.target.value}))})]}),e.jsxs(r,{variant:"outlined",onClick:ve,className:"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white",sx:{color:i?"#9CA3AF":"#6B7280",borderColor:i?"#374151":"#6B7280","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:[e.jsx(k,{className:"w-4 h-4"}),"Add Model Feature"]}),o.model_features.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-foreground",children:"Added Model Features"}),Se.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Primary Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Se.map(a=>e.jsx(Q,{feature:a,onRemove:je},a.id))})]}),Ae.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Additional Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Ae.map(a=>e.jsx(Q,{feature:a,onRemove:je},a.id))})]})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Product Images"}),d.images&&e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:d.images}),e.jsx(K,{dragActive:ie,onDrag:ce,onDrop:ne,onFileSelect:Ce}),te.length>0&&e.jsx(M,{images:te,onRemoveImage:oe})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Product Variants"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create different variations of your product"})]}),e.jsxs(r,{variant:"outlined",onClick:()=>Z(!Y),sx:{color:i?"#9CA3AF":"#6B7280",borderColor:i?"#374151":"#6B7280","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:[e.jsx(k,{className:"w-4 h-4"}),"Add Variant"]})]}),Y&&e.jsxs("div",{className:"border border-border rounded-lg p-4 space-y-4 bg-muted/20",children:[e.jsx("h3",{className:"text-md font-medium text-foreground",children:re?"Edit Variant":"Create New Variant"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(j,{id:"variant-title",label:"Title *",placeholder:"e.g., Large Black Leather",value:ee.title,onChange:e=>ae(a=>({...a,title:e.target.value}))}),e.jsx(j,{id:"variant-sku",label:"SKU *",placeholder:"e.g., SKU-001",value:ee.sku,onChange:e=>ae(a=>({...a,sku:e.target.value}))}),e.jsx(j,{id:"variant-size",label:"Size",placeholder:"e.g., Large, XL",value:ee.size,onChange:e=>ae(a=>({...a,size:e.target.value}))}),e.jsx(j,{id:"variant-color",label:"Color",placeholder:"e.g., Black, Red",value:ee.color,onChange:e=>ae(a=>({...a,color:e.target.value}))}),e.jsx(j,{id:"variant-material",label:"Material",placeholder:"e.g., Leather, Steel",value:ee.material,onChange:e=>ae(a=>({...a,material:e.target.value}))}),e.jsx(j,{id:"variant-price",label:"Price *",type:"number",placeholder:"0.00",value:ee.price,onChange:e=>ae(a=>({...a,price:e.target.value})),InputProps:{startAdornment:e.jsx(N,{color:"text-gray-400 dark:text-gray-400",className:"text-base mr-2"})}}),e.jsx(j,{id:"variant-compare-price",label:"Compare at Price",type:"number",placeholder:"0.00",value:ee.compare_at_price,onChange:e=>ae(a=>({...a,compare_at_price:e.target.value})),InputProps:{startAdornment:e.jsx(N,{color:"text-gray-400 dark:text-gray-400",className:"text-base mr-2"})}}),e.jsx(j,{id:"variant-quantity",label:"Quantity *",type:"number",placeholder:"0",value:ee.quantity,onChange:e=>ae(a=>({...a,quantity:e.target.value}))}),e.jsx(b,{id:"variant-status",label:"Status *",placeholder:"Select status",options:F,value:ee.status,onChange:e=>ae(a=>({...a,status:e.target.value}))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:e=>be(e.target.files[0]),className:"hidden",id:"variant-image-upload"}),e.jsxs(r,{type:"button",variant:"outline",onClick:ke,className:"gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Upload Image"]})]}),ee.image&&e.jsx(J,{image:ee.image,onRemove:we})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outlined",onClick:fe,children:re?"Update":"Add"}),e.jsx(r,{variant:"outline",onClick:_e,sx:{color:"#9CA3AF",borderColor:"#374151","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:"Cancel"})]})]}),E.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-foreground",children:"Created Variants"}),e.jsx(O,{variants:E,onEdit:Ne,onRemove:ye})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Product Status"}),e.jsx(L,{status:o.status,onStatusChange:e=>n("status",e)})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Actions"}),e.jsx(r,{className:"w-full gap-2 !bg-black dark:!bg-white !text-white dark:!text-black",variant:"primary",size:"md",disabled:me,onClick:()=>{const e=new FormData;e.append("name",o.name),e.append("description",o.description),e.append("short_description",o.short_description),e.append("sku",o.sku),e.append("status",o.status),Array.isArray(o.categories)&&o.categories.forEach(a=>{e.append("categories[]",a)}),o.features.forEach((a,r)=>{e.append(`features[${r}][name]`,a.name),e.append(`features[${r}][type]`,a.type),e.append(`features[${r}][icon]`,a.icon||"")}),o.technical_specs.forEach((a,r)=>{e.append(`technical_specs[${r}][key]`,a.key),e.append(`technical_specs[${r}][value]`,a.value)}),o.model_features.forEach((a,r)=>{e.append(`model_features[${r}][name]`,a.name),e.append(`model_features[${r}][category]`,a.category||"")});const a=[];te.forEach(r=>{r.file?e.append("images[]",r.file):r.id&&a.push(r.id)}),a.forEach(a=>e.append("existing_image_ids[]",a)),E.forEach((a,r)=>{a.id&&"number"==typeof a.id&&e.append(`variants[${r}][id]`,String(a.id)),e.append(`variants[${r}][title]`,a.title),e.append(`variants[${r}][sku]`,a.sku),e.append(`variants[${r}][size]`,a.size||""),e.append(`variants[${r}][color]`,a.color||""),e.append(`variants[${r}][material]`,a.material||""),e.append(`variants[${r}][price]`,a.price),e.append(`variants[${r}][compare_at_price]`,a.compare_at_price||""),e.append(`variants[${r}][quantity]`,a.quantity),e.append(`variants[${r}][status]`,a.status),a.image&&a.image.file?e.append(`variants[${r}][image]`,a.image.file):a.image&&a.image.id&&"number"==typeof a.image.id&&e.append(`variants[${r}][existing_image_id]`,String(a.image.id))}),H.forEach(a=>{e.append("deleted_variant_ids[]",String(a))}),ue(!0),e.append("_method","PUT"),g.post(route("admin.products.update",{id:s}),e,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{ue(!1)},onError:e=>{ue(!1)},onFinish:()=>ue(!1)})},startIcon:e.jsx(w,{className:"w-4 h-4"}),children:me?"Saving Changes...":"Save Changes"})]})]})]})})})]})}function H({productId:a,product:r,categories:s}){return e.jsxs(v,{children:[e.jsx(m,{title:"Edit Product"}),e.jsx(W,{productId:a,product:r,categories:s})]})}export{H as default};

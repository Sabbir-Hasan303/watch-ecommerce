import{r as e,j as a,F as s,I as r,S as t,B as l,P as i,i as o,k as c,l as d,m as n,n as m,o as x,p as u,s as g}from"./mui-BKRBi9c6.js";import{A as h}from"./AuthenticatedLayout-B0v8q34p.js";import{C as j}from"./CustomTextField-BTuAnPE3.js";import{H as p,r as b}from"./vendor-CXfu1X1j.js";import{P as f}from"./plus-avlLwFjE.js";import{F as v}from"./folder-open-B3W5q8Pj.js";import{S as N}from"./square-pen-CTrpYGSO.js";import{T as y}from"./trash-2-DJX3qbod.js";import{X as w}from"./x-BWEyoRfZ.js";import{U as C}from"./upload--99Nij4X.js";import{I as k}from"./user-check-BkBYIEHF.js";import{S as P}from"./save-b8lrRLdX.js";import"./Navbar-Cp-VK2OZ.js";import"./app-BLkjJg0m.js";import"./Sidebar-HDh619-e.js";import"./utils-Dp6QJa9S.js";import"./package-BZ0coysK.js";import"./createLucideIcon-DTafSqzE.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";import"./user-D2E5EHqK.js";import"./index-DnSngz2F.js";function z({categories:z=[]}){const[S,I]=e.useState(""),[L,U]=e.useState(!1),[A,E]=e.useState(null),[B,F]=e.useState({}),[R,_]=e.useState(0),[O,D]=e.useState(10),[G,T]=e.useState({name:"",image:"",status:"active"}),[$,H]=e.useState(null),W=z.filter(e=>e.name?.toLowerCase().includes(S.toLowerCase())||e.slug?.toLowerCase().includes(S.toLowerCase())),J=R*O,M=W.slice(J,J+O),q=()=>{$&&$.file&&URL.revokeObjectURL($.url),U(!1),E(null),H(null),F({}),T({name:"",image:"",status:"active"})};return a.jsxs(h,{children:[a.jsx(p,{title:"Product Categories"}),a.jsx("div",{className:"py-4 custom-container mx-auto md:px-[40px] md:py-[18px]",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl leading-9 font-bold text-text-primary mb-6",children:"Product Categories"}),a.jsxs("div",{className:"bg-card shadow-lg rounded-lg",children:[a.jsxs("div",{className:"p-6 flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[a.jsx(s,{size:"small",sx:{minWidth:300},children:a.jsx(j,{placeholder:"Search categories...",value:S,onChange:e=>I(e.target.value),InputProps:{startAdornment:a.jsx(r,{position:"start",children:a.jsx(t,{color:"action",className:"!text-text-secondary dark:text-dark-text-primary"})})}})}),a.jsx(l,{onClick:()=>U(!0),variant:"outlined",size:"md",startIcon:a.jsx(f,{className:"w-4 h-4"}),children:"Add Category"})]}),a.jsxs(i,{sx:{width:"100%"},children:[a.jsx(o,{sx:{maxHeight:"500px"},className:"table-container",children:a.jsxs(c,{stickyHeader:!0,children:[a.jsx(d,{children:a.jsxs(n,{children:[a.jsx(m,{className:"table-header-cell dark:table-header-cell",sx:{position:"sticky",top:0,zIndex:10},children:a.jsx("div",{className:"flex items-center gap-2",children:"Category"})}),a.jsx(m,{className:"table-header-cell dark:table-header-cell",sx:{position:"sticky",top:0,zIndex:10},children:"Slug"}),a.jsx(m,{className:"table-header-cell dark:table-header-cell",sx:{position:"sticky",top:0,zIndex:10},children:a.jsx("div",{className:"flex items-center gap-2",children:"Products"})}),a.jsx(m,{className:"table-header-cell dark:table-header-cell !text-center",sx:{position:"sticky",top:0,zIndex:10},children:"Actions"})]})}),a.jsx(x,{children:0===M.length?a.jsx(n,{children:a.jsx(m,{colSpan:4,className:"table-body-cell dark:table-body-cell text-center py-8",children:a.jsx(u,{variant:"body2",className:"text-muted-foreground",children:"No categories found"})})}):M.map(e=>a.jsxs(n,{hover:!0,children:[a.jsx(m,{className:"table-body-cell dark:table-body-cell",children:a.jsxs("div",{className:"flex items-center gap-3",children:[e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,className:"w-10 h-10 rounded-lg object-cover flex-shrink-0"}):a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(v,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx(u,{variant:"body2",className:"font-medium text-foreground",children:e.name}),a.jsxs(u,{variant:"caption",className:"text-muted-foreground",children:["ID: ",e.id]})]})]})}),a.jsx(m,{className:"table-body-cell dark:table-body-cell",children:a.jsx(u,{variant:"body2",className:"text-muted-foreground font-mono",children:e.slug})}),a.jsx(m,{className:"table-body-cell dark:table-body-cell",children:a.jsx(u,{variant:"body2",className:"font-semibold text-foreground",children:e.products_count||0})}),a.jsx(m,{className:"table-body-cell dark:table-body-cell",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>(e=>{E(e),F({}),T({name:e.name,image:e.image_url||"",status:"active"}),e.image_url?H({file:null,url:e.image_url}):H(null),U(!0)})(e),children:a.jsx(N,{className:"w-4 h-4"})}),a.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>{return a=e.id,void(confirm("Are you sure you want to delete this category?")&&b.delete(route("admin.products.categories.destroy",a)));var a},children:a.jsx(y,{className:"w-4 h-4"})})]})})]},e.id))})]})}),a.jsx(g,{className:"table-pagination dark:table-pagination",rowsPerPageOptions:[5,10,25,50,100],component:"div",count:W.length,rowsPerPage:O,page:R,onPageChange:(e,a)=>_(a),onRowsPerPageChange:e=>{D(parseInt(e.target.value,10)),_(0)},labelDisplayedRows:({from:e,to:a,count:s})=>`${e}-${a} of ${-1!==s?s:`more than ${a}`}`})]})]}),L&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-card border border-border rounded-xl max-w-2xl w-full max-h-[90vh] overflow-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between sticky top-0 bg-card z-10",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:A?"Edit Category":"Add New Category"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:A?"Update category information":"Create a new product category"})]}),a.jsx(l,{variant:"ghost",size:"icon",onClick:q,children:a.jsx(w,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{children:a.jsx(j,{label:"Category Name",placeholder:"Enter category name",value:G.name,error:!!B.name,helperText:B.name,onChange:e=>{T({...G,name:e.target.value}),B.name&&F({...B,name:""})}})}),B.image&&a.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:B.image}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{children:"Category Image"}),$?a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"border-2 border-border rounded-lg p-4",children:a.jsx("img",{src:$.url,alt:"Category preview",className:"w-full h-32 object-cover rounded-lg"})}),a.jsx(l,{variant:"destructive",size:"small",onClick:()=>{$&&URL.revokeObjectURL($.url),H(null),T(e=>({...e,image:""}))},className:"absolute top-2 right-2 h-8 w-8 p-0",children:a.jsx(w,{className:"w-4 h-4"})})]}):a.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-emerald-500/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:a.jsx(C,{className:"w-8 h-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Upload category image"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WEBP, ICO up to 5MB"})]}),a.jsxs(l,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",onClick:()=>{document.getElementById("category-image-upload")?.click()},children:[a.jsx(k,{className:"w-4 h-4"}),"Choose File"]})]})}),a.jsx("input",{id:"category-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/ico",className:"hidden",onChange:e=>{const a=e.target.files[0];if(a){if(!["image/jpeg","image/jpg","image/png","image/webp","image/ico"].includes(a.type))return void alert("Please select a valid image file (JPG, PNG, WEBP, or ICO)");const e=5242880;if(a.size>e)return void alert("File size must be less than 5MB");const s=URL.createObjectURL(a);H({file:a,url:s}),T(e=>({...e,image:s}))}}})]})]}),a.jsxs("div",{className:"p-6 border-t border-border flex flex-col flex-col-reverse md:flex-row gap-3 justify-end",children:[a.jsx(l,{variant:"outline",onClick:q,sx:{color:"#9CA3AF",borderColor:"#374151","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:"Cancel"}),a.jsx(l,{onClick:()=>{F({}),A?b.post(route("admin.products.categories.update",A.id),{_method:"PUT",name:G.name,image:$&&$.file?$.file:null},{forceFormData:!0,onSuccess:()=>{q()},onError:e=>{F(e)}}):b.post(route("admin.products.categories.store"),{name:G.name,image:$&&$.file?$.file:null},{forceFormData:!0,onSuccess:()=>{q()},onError:e=>{F(e)}})},variant:"outlined",size:"md",startIcon:a.jsx(P,{className:"w-4 h-4"}),children:A?"Update Category":"Create Category"})]})]})})]})})]})}export{z as default};

import{j as e,r as s,B as r,F as d,N as a}from"./mui-BKRBi9c6.js";import{H as t,L as l,r as i}from"./vendor-CXfu1X1j.js";import{A as n}from"./AuthenticatedLayout-B0v8q34p.js";import{C as o}from"./CustomSelectField-B-S7bTVB.js";import{T as c}from"./Taka-HCVrmtu1.js";import{C as m}from"./CancelOrderDialog-DRfxX8vs.js";import{n as x}from"./index-DnSngz2F.js";import{u as p}from"./app-BLkjJg0m.js";import{C as h}from"./circle-x-CZyvEPCZ.js";import{P as u}from"./package-BZ0coysK.js";import{T as j}from"./truck-COhtLTKw.js";import{C as g}from"./circle-check-big-C6kL7bLL.js";import{C as b}from"./clock-jxPEyoyk.js";import{S as f}from"./square-pen-CTrpYGSO.js";import{D as N}from"./download-B5zqFGKj.js";import{U as v}from"./user-D2E5EHqK.js";import{M as y}from"./map-pin-CREN4_JN.js";import{C as _}from"./credit-card-E5W6JTNG.js";import"./Navbar-Cp-VK2OZ.js";import"./Sidebar-HDh619-e.js";import"./utils-Dp6QJa9S.js";import"./user-check-BkBYIEHF.js";import"./createLucideIcon-DTafSqzE.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";const w={pending:{label:"Pending",icon:b,color:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"},confirmed:{label:"Confirmed",icon:g,color:"bg-blue-500/10 text-blue-500 border-blue-500/20"},shipped:{label:"Shipped",icon:j,color:"bg-purple-500/10 text-purple-500 border-purple-500/20"},delivered:{label:"Delivered",icon:u,color:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20"},cancelled:{label:"Cancelled",icon:h,color:"bg-red-500/10 text-red-500 border-red-500/20"}};function C({order:t}){const[n,u]=s.useState(t?.status||"pending"),[j,b]=s.useState(!1),{isDarkMode:C}=p(),k=t?.user?{name:t.user.name,email:t.user.email,phone:t.user.phone}:{name:t.shipping_address.full_name||"Guest",email:t.shipping_address.email||"N/A",phone:t.shipping_address.phone||"N/A"},A=w[n].icon;return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"space-y-6 custom-container mx-auto md:px-[40px] md:py-[18px]",children:e.jsxs("div",{className:"bg-card rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl leading-9 font-bold text-text-primary mb-6",children:"Order Details"}),e.jsxs("div",{className:"flex items-center gap-3",children:["delivered"!==n&&"shipped"!==n&&e.jsx(l,{href:route("admin.orders.edit",{id:t.id}),children:e.jsxs(r,{variant:"outlined",size:"sm",sx:{color:C?"#9CA3AF":"#374151",borderColor:C?"#374151":"#9CA3AF","&:hover":{bgcolor:C?"rgba(55, 65, 81, 0.3)":"#9CA3AF",borderColor:C?"#6B7280":"#9CA3AF"}},children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit Order"})]})}),e.jsxs(r,{variant:"outlined",size:"sm",onClick:()=>window.open(route("admin.orders.invoice",{id:t.id}),"_blank"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Invoice"})]})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${w[n].color}`,children:e.jsx(A,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Order Status"}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:w[n].label}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Order #",t?.order_number]})]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:"cancelled"===n?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsx(h,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-500 font-medium",children:"Order Cancelled"})]}):"delivered"===n?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"text-emerald-500 font-medium",children:"Order Delivered"})]}):e.jsx(e.Fragment,{children:e.jsx(d,{size:"small",sx:{minWidth:200},children:e.jsx(o,{label:"Order Status",options:Object.values(w).filter(e=>"Cancelled"!==e.label).map(e=>({label:e.label,value:e.label})),value:w[n]?.label||"",onChange:e=>(e=>{const s=Object.keys(w).find(s=>w[s].label===e);s&&i.post(route("admin.orders.change-status",{id:t.id}),{id:t.id,status:s},{onSuccess:()=>{u(s),x.success(`Order status updated to ${e}`)},onError:e=>{x.error("Failed to update order status")}})})(e.target.value)})})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:t?.items?.map(s=>{const r=s.product?.images?.find(e=>e.product_variant_id===s.variant?.id),d=r?.image_path?`/storage/${r.image_path}`:s.product?.images?.[0]?.image_path?`/storage/${s.product.images[0].image_path}`:"/placeholder.svg";return e.jsxs("div",{className:"flex flex-wrap gap-4 p-4 bg-muted/30 rounded-lg",children:[e.jsx("img",{src:d,alt:s.product?.name||"Product",className:"w-20 h-20 object-cover rounded-lg bg-muted"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.product?.name||"Unknown Product"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.variant?.title||"Default"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["SKU: ",s.variant?.sku||s.product?.sku||"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Quantity: ",s.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-foreground text-base flex items-center gap-1",children:[e.jsx(c,{className:"text-base"}),Number(s.total_price||0).toFixed(2)]})})]},s.id)})||e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No items found"})})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("div",{className:"text-foreground text-base flex items-center gap-1",children:[e.jsx(c,{className:"text-base"}),Number(t.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsxs("div",{className:"text-foreground text-base flex items-center gap-1",children:[e.jsx(c,{className:"text-base"}),Number(t.shipping_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsxs("div",{className:"text-foreground text-base flex items-center gap-1",children:[e.jsx(c,{className:"text-base"}),Number(t.tax_total||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t border-border",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("div",{className:"text-foreground text-base flex items-center gap-1",children:[e.jsx(c,{className:"text-base"}),Number(t.total||0).toFixed(2)]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Customer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-foreground",children:k.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.phone})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:e.jsx(y,{className:"w-5 h-5 text-purple-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Shipping Address"})]}),e.jsx("div",{className:"space-y-1 text-sm text-muted-foreground",children:t?.shipping_address?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("strong",{children:t.shipping_address.full_name||t.user.name})}),e.jsx("p",{children:t.shipping_address.phone}),"inside_dhaka"===t.shipping_address.area?e.jsx("p",{children:"Inside Dhaka"}):e.jsx("p",{children:"Outside Dhaka"}),e.jsx("p",{children:t.shipping_address.address_line})]}):t?.guest_info?.address?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("strong",{children:t.guest_info.name})}),e.jsx("p",{children:t.guest_info.phone}),e.jsx("p",{children:t.guest_info.email}),"inside_dhaka"===t.guest_info.area?e.jsx("p",{children:"Inside Dhaka"}):e.jsx("p",{children:"Outside Dhaka"}),e.jsx("p",{children:t.guest_info.address})]}):e.jsx("p",{children:"No shipping address provided"})})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-blue-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Payment"})]}),"cod"===t?.payment_method?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cash on Delivery"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.payment_method||"N/A"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(a,{className:"w-5 h-5 text-blue-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Additional Notes"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.notes||"N/A"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:"cancelled"!==n&&"delivered"!==n&&"shipped"!==n&&e.jsx(r,{variant:"outlined",onClick:()=>b(!0),className:"!bg-red-500/10 !border-red-500/20 !text-red-500 hover:bg-red-500/20 hover:text-white",children:"Cancel Order"})})]})})}),e.jsx(m,{open:j,onClose:()=>b(!1),orderId:t.id,onSuccess:()=>{u("cancelled")}})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading order details..."})]})})})})}function k({order:s}){return e.jsxs(n,{children:[e.jsx(t,{title:"View Order"}),e.jsx(C,{order:s})]})}export{k as default};

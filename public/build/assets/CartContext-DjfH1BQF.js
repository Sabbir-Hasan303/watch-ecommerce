import{c as t}from"./createLucideIcon-DTafSqzE.js";import{r as a,j as e}from"./mui-BKRBi9c6.js";import{a as r}from"./vendor-CXfu1X1j.js";import{n as s}from"./index-DnSngz2F.js";
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=t("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),o=t("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),n=a.createContext(void 0);function u({children:t}){const[c,o]=a.useState([]),[u,d]=a.useState(!1),[i,l]=a.useState(!0),m=a.useCallback(t=>{o(t&&Array.isArray(t.items)?t.items:[])},[]);a.useEffect(()=>{let t=!0;return(async()=>{try{const{data:a}=await r.get(route("cart.show"));if(!t)return;m(a.cart)}catch(a){t&&o([])}finally{t&&l(!1)}})(),()=>{t=!1}},[m]);const p=a.useCallback(async({productId:t,productVariantId:a=null,quantity:e=1})=>{try{const{data:c}=await r.post(route("cart.items.store"),{product_id:t,product_variant_id:a,quantity:e});return m(c.cart),d(!0),s.success("Added to cart"),c.cart}catch(c){const t=c?.response?.data?.message??"Unable to add item to cart.";throw s.error(t),c}},[m]),y=a.useCallback(async t=>{try{const{data:a}=await r.delete(route("cart.items.destroy",t));m(a.cart)}catch(a){const t=a?.response?.data?.message??"Unable to remove item from cart.";throw s.error(t),a}},[m]),h=a.useCallback(async(t,a)=>{if(!(a<1))try{const{data:e}=await r.patch(route("cart.items.update",t),{quantity:a});m(e.cart)}catch(e){const t=e?.response?.data?.message??"Unable to update quantity.";throw s.error(t),e}},[m]),k=a.useCallback(async()=>{try{const{data:t}=await r.delete(route("cart.clear"));m(t.cart)}catch(t){const a=t?.response?.data?.message??"Unable to clear cart.";throw s.error(a),t}},[m]),b=a.useCallback(()=>{d(!0)},[]),C=a.useCallback(()=>{d(!1)},[]),f=a.useCallback((t,a)=>c.some(e=>e.productId===t&&(e.productVariantId??null)===(a??null)),[c]),w=a.useMemo(()=>c.reduce((t,a)=>t+a.quantity,0),[c]),j=a.useMemo(()=>{const t=c.reduce((t,a)=>t+(Number(a.unitPrice)||0)*a.quantity,0);return Math.round(100*t)/100},[c]);return e.jsx(n.Provider,{value:{items:c,addItem:p,removeItem:y,updateQuantity:h,clearCart:k,isInCart:f,isOpen:u,openCart:b,closeCart:C,itemCount:w,subtotal:j,isLoading:i},children:t})}function d(){return a.useContext(n)}export{u as C,c as L,o as M,d as u};

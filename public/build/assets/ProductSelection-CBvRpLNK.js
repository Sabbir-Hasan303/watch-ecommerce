import{r as e,j as t,e as a,p as s,B as r}from"./mui-BKRBi9c6.js";import{C as o}from"./card-DBmDQUNT.js";import{B as l}from"./badge-ClgcrdnI.js";import{A as d}from"./AsynchronousInput-DNmkCEvD.js";import{T as i}from"./Taka-HCVrmtu1.js";import{P as c}from"./package-BZ0coysK.js";import{T as n}from"./triangle-alert-VcCWLTm0.js";import{P as m}from"./plus-avlLwFjE.js";import"./utils-Dp6QJa9S.js";import"./app-BLkjJg0m.js";import"./vendor-CXfu1X1j.js";import"./createLucideIcon-DTafSqzE.js";function x({products:x=[],addToCart:u,cart:p}){const[h,g]=e.useState(null),[j,f]=e.useState(null),[N,v]=e.useState(!1),[b,w]=e.useState([]),[y,k]=e.useState(!1),C=e.useRef(null);e.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);const T=e.useCallback(e=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{e&&e.length>=2?(k(!0),setTimeout(()=>{const t=x.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.category.toLowerCase().includes(e.toLowerCase())||t.variants?.some(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.sku.toLowerCase().includes(e.toLowerCase()))).flatMap(e=>e.variants?.map(t=>({...t,product:e,productName:e.name,productImage:e.image,productCategory:e.category}))||[]);w(t),k(!1)},300)):(w([]),k(!1))},300)},[x]);return t.jsxs(o,{className:"p-4 md:p-10 bg-card border-border shadow-xl hover:shadow-2xl transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-5 mb-10",children:[t.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-2xl shadow-lg",children:t.jsx(c,{className:"w-5 h-5 text-emerald-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl leading-8 font-bold text-text-primary",children:"Add Products"}),t.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"Search and add products to the order"})]})]}),t.jsx("div",{className:"mb-10",children:t.jsx(d,{options:b,loading:y,onOpen:()=>{},onClose:()=>{w([]),C.current&&(clearTimeout(C.current),C.current=null)},onInputChange:(e,t,a)=>{"input"===a&&T(t)},onChange:(e,t)=>{return g((a=t).product),void f(a);var a},value:null,getOptionLabel:e=>e?`${e.productName} - ${e.title}`:"",isOptionEqualToValue:(e,t)=>e?.id===t?.id,label:"Search Products",placeholder:"Type at least 2 characters to search...",noOptionsText:0!==b.length||y?"No products found":"Type to search for products...",sx:{width:"100%"},renderOption:(e,r)=>t.jsxs(a,{component:"li",...e,className:"flex items-center gap-3 p-3",children:[t.jsx("img",{src:r.productImage||"/placeholder.svg",alt:r.productName,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(s,{variant:"body2",className:"font-medium text-foreground truncate",children:r.productName}),t.jsxs(s,{variant:"caption",className:"text-muted-foreground",children:[r.title," • SKU: ",r.sku]})]}),t.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:t.jsx(s,{variant:"body2",className:"font-medium",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(i,{color:"text-black dark:text-white",className:"text-base"}),t.jsx("span",{className:"text-base",children:Number(r.price||0).toFixed(2)})]})})})]})})}),h&&t.jsx("div",{className:"space-y-6",children:t.jsxs(o,{className:"p-6 border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("img",{src:h.image||"/placeholder.svg",alt:h.name,className:"w-20 h-20 rounded-xl object-cover bg-muted shadow-md"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-foreground text-xl",children:h.name}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.category," • ",h.variants.length," variant",1!==h.variants.length?"s":""]})]})]}),j&&t.jsx(o,{className:"p-4 max-w-sm",children:t.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap md:items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:j.image,alt:j.title,className:"w-16 h-16 rounded-lg object-cover bg-muted shadow-sm transition-all duration-300 "+(N?"opacity-50":"opacity-100"),onLoad:()=>v(!1),onError:()=>v(!1)},j.id),N&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted rounded-lg",children:t.jsx("div",{className:"w-4 h-4 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"})})]}),t.jsxs("div",{className:"flex-1 flex-wrap gap-2",children:[t.jsx("h5",{className:"font-semibold text-foreground",children:j.title||`${j.color||""} ${j.size||""}`.trim()}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["SKU: ",j.sku]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[t.jsx("span",{className:"text-lg font-bold text-emerald-600",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(i,{color:"text-emerald-600",className:"text-base font-bold"}),t.jsx("span",{className:"text-base",children:(j.price||0).toFixed(2)})]})}),j.compare_at_price&&j.compare_at_price>j.price&&t.jsx("span",{className:"text-sm text-gray-500 line-through",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(i,{color:"text-gray-500",className:"text-sm font-bold"}),t.jsx("span",{className:"text-sm",children:(j.compare_at_price||0).toFixed(2)})]})}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",j.quantity," in stock)"]}),(S=j,S.quantity<=10&&t.jsxs(l,{variant:"outline",className:"text-xs border-orange-500 text-orange-600 bg-orange-50",children:[t.jsx(n,{className:"w-3 h-3 mr-1"}),"Low Stock"]}))]})]}),t.jsxs(r,{onClick:()=>{if(h&&j){const e={id:`${h.id}-${j.id}`,productId:h.id,variantId:j.id,name:h.name,variantTitle:j.title,sku:j.sku,price:j.price,compare_at_price:j.compare_at_price,stock:j.quantity,image:j.image||h.image,category:h.category,quantity:1};u(e)}},className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-md hover:shadow-lg transition-all",disabled:0===j.quantity,children:[t.jsx(m,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"font-semibold text-foreground mt-3",children:"Select Variant:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:h.variants.map(e=>t.jsx(r,{variant:(e.id,"outlined"),onClick:()=>(e=>{v(!0),f(e),setTimeout(()=>v(!1),300)})(e),className:"min-w-0 "+(j?.id===e.id?"!bg-emerald-500 !hover:bg-emerald-600 !text-white !border-none":"border-gray-300 hover:border-emerald-500"),disabled:0===e.quantity,children:t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"font-medium text-sm",children:e.title||`${e.color||""} ${e.size||""}`.trim()})})},e.id))})]})]})}),!h&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(c,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Product Selected"}),t.jsx("p",{className:"text-muted-foreground",children:"Search for a product to see its variants and add to cart"})]})]});var S}export{x as default};

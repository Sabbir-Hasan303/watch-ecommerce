import{r as e,j as s,B as a,F as t,I as r,S as l,C as i,D as o,u as n,v as d,x as c,e as m,w as x}from"./mui-BKRBi9c6.js";import{A as u}from"./AuthenticatedLayout-B0v8q34p.js";import{C as p}from"./CustomTextField-BTuAnPE3.js";import{C as j}from"./CustomSelectField-B-S7bTVB.js";import{u as h}from"./app-BLkjJg0m.js";import{H as g,r as b}from"./vendor-CXfu1X1j.js";import{P as v}from"./plus-avlLwFjE.js";import{E as f}from"./eye-C6XdZ-Tw.js";import{E as N}from"./eye-off-fvTDCOP4.js";import{S as y}from"./square-pen-CTrpYGSO.js";import{T as C}from"./trash-2-DJX3qbod.js";import{I as w}from"./user-check-BkBYIEHF.js";import{X as k}from"./x-BWEyoRfZ.js";import{U as A}from"./upload--99Nij4X.js";import"./Navbar-Cp-VK2OZ.js";import"./Sidebar-HDh619-e.js";import"./utils-Dp6QJa9S.js";import"./package-BZ0coysK.js";import"./createLucideIcon-DTafSqzE.js";import"./chevron-right-CHPI7KdZ.js";import"./chevron-left-CvYp6kNR.js";import"./user-D2E5EHqK.js";import"./index-DnSngz2F.js";function B({banners:B=[]}){const[P,S]=e.useState(""),[E,F]=e.useState(!1),[L,U]=e.useState({status:!0,position:"Homepage Hero"}),[H,z]=e.useState(null),[R,D]=e.useState(null),[I,T]=e.useState(null),[W,O]=e.useState({}),{isDark:_}=h(),G=B.filter(e=>e.title.toLowerCase().includes(P.toLowerCase())),q=()=>{R&&R.file&&R.url&&URL.revokeObjectURL(R.url),D(null),U({status:!0,position:"Homepage Hero"}),z(null),O({})};return s.jsxs(u,{children:[s.jsx(g,{title:"Banners"}),s.jsx("div",{className:"py-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl leading-9 font-bold text-text-primary mb-6",children:"Banners"}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Upload and manage simple banner placements"})]}),s.jsx("div",{children:s.jsxs(a,{variant:"outlined",onClick:()=>F(!0),children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"Add Banner"]})})]}),s.jsx(t,{size:"small",sx:{minWidth:200},children:s.jsx(p,{placeholder:"Search banners...",value:P,onChange:e=>S(e.target.value),InputProps:{startAdornment:s.jsx(r,{position:"start",children:s.jsx(l,{className:"w-4 h-4 mr-2"})})}})}),s.jsxs("div",{children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:G.map(e=>s.jsxs(i,{className:"bg-[#1C252E] border-white/10 overflow-hidden",children:[s.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-gray-800 to-gray-700",children:[e.image_url?s.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover opacity-90"}):null,s.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:s.jsx(a,{size:"small",variant:"contained",className:"!bg-white !text-black",onClick:()=>{return s=e.id,void b.post(route("admin.contents.banners.toggle-status",s));var s},children:e.status?s.jsx(f,{className:"w-4 h-4"}):s.jsx(N,{className:"w-4 h-4"})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:e.title}),s.jsx("p",{className:"text-sm text-text-secondary",children:e.position})]}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(e.status?"bg-emerald-500/20 text-emerald-400":"bg-gray-500/20 text-gray-400"),children:e.status?"active":"inactive"})]}),s.jsx("div",{className:"space-y-2 mb-4"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{variant:"outlined",size:"small",startIcon:s.jsx(y,{className:"w-4 h-4"}),onClick:()=>(e=>{z(e),U({title:e.title,position:e.position,status:e.status}),e.image_url?D({file:null,url:e.image_url}):D(null),F(!0)})(e),sx:{flex:1,borderColor:"#374151",color:_?"#9CA3AF":"#1c252e","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:"Edit"}),s.jsx(a,{variant:"outlined",size:"small",onClick:()=>T(e.id),sx:{borderColor:"rgba(239, 68, 68, 0.2)",color:"#EF4444","&:hover":{bgcolor:"rgba(239, 68, 68, 0.1)",borderColor:"#EF4444"}},children:s.jsx(C,{className:"w-4 h-4"})})]})]})]},e.id))}),0===G.length&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(w,{className:"w-16 h-16 text-text-secondary mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-text-secondary mb-2",children:"No banners found"}),s.jsx("p",{className:"text-sm text-text-secondary",children:P?"Try adjusting your search":"Add your first banner to get started"})]})]})]})}),s.jsxs(o,{open:E,onClose:()=>{F(!1),q()},maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:"#1C252E",border:"1px solid #374151"}},children:[s.jsx(n,{className:"text-text-primary font-medium",children:H?"Edit Banner":"Add New Banner"}),s.jsxs(d,{children:[s.jsx(c,{sx:{color:"#9CA3AF",mb:2},children:"Create a new banner. Only Homepage Hero position is available for now."}),s.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s.jsx(p,{label:"Banner Name",placeholder:"Enter banner name",value:L.title||"",onChange:e=>U({...L,title:e.target.value}),error:!!W.title,helperText:W.title,fullWidth:!0}),s.jsxs(m,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[s.jsx(j,{label:"Position",value:L.position,onChange:e=>U({...L,position:e.target.value}),options:[{value:"Homepage Hero",label:"Homepage Hero"},{value:"Category Page",label:"Category Page",disabled:!0},{value:"Product Page",label:"Product Page",disabled:!0},{value:"Sidebar",label:"Sidebar",disabled:!0}]}),s.jsx(j,{label:"Status",value:L.status,onChange:e=>U({...L,status:"true"===e.target.value||!0===e.target.value}),options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}]})]}),W.image&&s.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:W.image}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:["Banner Image ",s.jsx("span",{className:"text-red-500",children:"*"})]}),R?s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"border-2 border-[#374151] rounded-lg p-4",children:s.jsx("img",{src:R.url,alt:"Banner preview",className:"w-full h-32 object-cover rounded-lg"})}),s.jsx(a,{variant:"contained",size:"small",onClick:()=>{R&&R.file&&R.url&&URL.revokeObjectURL(R.url),D(null)},className:"!absolute !top-2 !right-2 !h-8 !w-8 !min-w-0 !p-0 !bg-red-600",children:s.jsx(k,{className:"w-4 h-4"})})]}):s.jsx("div",{className:"border-2 border-dashed border-[#374151] rounded-lg p-8 text-center hover:border-emerald-500/50 transition-colors",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 bg-[#2a3440] rounded-full flex items-center justify-center",children:s.jsx(A,{className:"w-8 h-8 text-[#9CA3AF]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-text-primary",children:"Upload banner image (Required)"}),s.jsx("p",{className:"text-xs text-text-secondary",children:"PNG, JPG, WEBP up to 5MB"})]}),s.jsxs(a,{variant:"outlined",size:"small",className:"gap-2",onClick:()=>{document.getElementById("banner-image-upload")?.click()},children:[s.jsx(w,{className:"w-4 h-4"}),"Choose File"]})]})}),s.jsx("input",{id:"banner-image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",className:"hidden",onChange:e=>{const s=e.target.files?.[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))return void alert("Please select a valid image (JPG, PNG, WEBP)");if(s.size>5242880)return void alert("File size must be less than 5MB");const a=URL.createObjectURL(s);R&&R.file&&R.url&&URL.revokeObjectURL(R.url),D({file:s,url:a})}})]})]})]}),s.jsxs(x,{sx:{p:3,gap:1},children:[s.jsx(a,{variant:"outlined",onClick:()=>{F(!1),q()},sx:{color:_?"#9CA3AF":"#1c252e",borderColor:"#374151","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:"Cancel"}),H?s.jsx(a,{variant:"outlined",onClick:()=>{H&&(O({}),b.post(route("admin.contents.banners.update",H.id),{_method:"PUT",title:L.title,position:L.position,status:L.status,image:R&&R.file?R.file:null},{forceFormData:!0,onSuccess:()=>{q(),F(!1)},onError:e=>{O(e)}}))},children:"Save Changes"}):s.jsx(a,{variant:"outlined",onClick:()=>{O({}),b.post(route("admin.contents.banners.store"),{title:L.title,position:L.position,status:L.status,image:R&&R.file?R.file:null},{forceFormData:!0,onSuccess:()=>{q(),F(!1)},onError:e=>{O(e)}})},children:"Add Banner"})]})]}),I&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-background border border-[#374151] rounded-xl max-w-md w-full overflow-hidden",children:[s.jsx("div",{className:"p-6 flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Delete Banner"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Are you sure you want to delete this banner?"})]})}),s.jsxs("div",{className:"p-6 flex flex-col md:flex-row gap-3 justify-end",children:[s.jsx(a,{variant:"outlined",onClick:()=>T(null),sx:{color:"#9CA3AF",borderColor:"#374151","&:hover":{bgcolor:"rgba(55, 65, 81, 0.3)",borderColor:"#6B7280"}},children:"Cancel"}),s.jsx(a,{variant:"outlined",onClick:()=>{return e=I,void b.delete(route("admin.contents.banners.destroy",e),{onSuccess:()=>{T(null)}});var e},children:"Delete"})]})]})})]})}export{B as default};
